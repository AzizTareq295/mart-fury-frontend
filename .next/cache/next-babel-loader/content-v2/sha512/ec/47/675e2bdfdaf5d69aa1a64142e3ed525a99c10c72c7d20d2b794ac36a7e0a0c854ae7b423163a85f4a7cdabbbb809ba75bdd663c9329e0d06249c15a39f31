{"ast":null,"code":"import _regeneratorRuntime from \"D:/laragon/www/brand-freak-frontend/node_modules/next/node_modules/@babel/runtime/regenerator\";\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(getCartSaga),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(addItemSaga),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(removeItemSaga),\n    _marked4 = /*#__PURE__*/_regeneratorRuntime.mark(increaseQtySaga),\n    _marked5 = /*#__PURE__*/_regeneratorRuntime.mark(decreaseItemQtySaga),\n    _marked6 = /*#__PURE__*/_regeneratorRuntime.mark(clearCartSaga),\n    _marked7 = /*#__PURE__*/_regeneratorRuntime.mark(rootSaga);\n\nimport { all, put, takeEvery } from 'redux-saga/effects';\nimport { notification } from 'antd';\nimport { actionTypes, getCartError, getCartSuccess, updateCartSuccess, updateCartError } from './action';\n\nvar modalSuccess = function modalSuccess(type) {\n  notification[type]({\n    message: 'Success',\n    description: 'This product has been added to your cart!',\n    duration: 1\n  });\n};\n\nvar modalWarning = function modalWarning(type) {\n  notification[type]({\n    message: 'Remove A Item',\n    description: 'This product has been removed from your cart!',\n    duration: 1\n  });\n};\n\nexport var calculateAmount = function calculateAmount(obj) {\n  return Object.values(obj).reduce(function (acc, product) {\n    return acc + product.quantity * product.price;\n  }, 0).toFixed(2);\n};\n\nfunction getCartSaga() {\n  return _regeneratorRuntime.wrap(function getCartSaga$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return put(getCartSuccess());\n\n        case 3:\n          _context.next = 9;\n          break;\n\n        case 5:\n          _context.prev = 5;\n          _context.t0 = _context[\"catch\"](0);\n          _context.next = 9;\n          return put(getCartError(_context.t0));\n\n        case 9:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[0, 5]]);\n}\n\nfunction addItemSaga(payload) {\n  var product, item, localCart, currentCart, existItem;\n  return _regeneratorRuntime.wrap(function addItemSaga$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          product = payload.product;\n          item = {\n            id: product.id,\n            name: product.name,\n            slug: product.slug,\n            sku: product.sku[0].sku,\n            regular_price: product.sku[0].regular_price,\n            sell_price: product.sku[0].sell_price,\n            price: product.sku[0].sell_price > 0 ? product.sku[0].sell_price : product.sku[0].regular_price,\n            product_stock: product.sku[0].stock,\n            thumbnail: product.product_media.feature_img\n          };\n          localCart = JSON.parse(localStorage.getItem('persist:martfury')).cart;\n          currentCart = JSON.parse(localCart);\n          existItem = currentCart.cartItems.find(function (p) {\n            return p.id === item.id;\n          });\n\n          if (existItem) {\n            existItem.quantity += item.quantity;\n          } else {\n            if (!item.quantity) {\n              item.quantity = 1;\n            }\n\n            currentCart.cartItems.push(item);\n          }\n\n          currentCart.amount = calculateAmount(currentCart.cartItems);\n          currentCart.cartTotal++;\n          _context2.next = 11;\n          return put(updateCartSuccess(currentCart));\n\n        case 11:\n          modalSuccess('success');\n          _context2.next = 18;\n          break;\n\n        case 14:\n          _context2.prev = 14;\n          _context2.t0 = _context2[\"catch\"](0);\n          _context2.next = 18;\n          return put(getCartError(_context2.t0));\n\n        case 18:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, null, [[0, 14]]);\n}\n\nfunction removeItemSaga(payload) {\n  var product, item, localCart, index;\n  return _regeneratorRuntime.wrap(function removeItemSaga$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          product = payload.product;\n          item = {\n            id: product.id,\n            name: product.name,\n            slug: product.slug,\n            sku: product.sku[0].sku,\n            regular_price: product.sku[0].regular_price,\n            sell_price: product.sku[0].sell_price,\n            price: product.sku[0].sell_price > 0 ? product.sku[0].sell_price : product.sku[0].regular_price,\n            product_stock: product.sku[0].stock,\n            thumbnail: product.product_media.feature_img\n          };\n          localCart = JSON.parse(JSON.parse(localStorage.getItem('persist:martfury')).cart);\n          index = localCart.cartItems.findIndex(function (p) {\n            return p.id === item.id;\n          });\n          localCart.cartTotal = localCart.cartTotal - product.quantity;\n          localCart.cartItems.splice(index, 1);\n          localCart.amount = calculateAmount(localCart.cartItems);\n\n          if (localCart.cartItems.length === 0) {\n            localCart.cartItems = [];\n            localCart.amount = 0;\n            localCart.cartTotal = 0;\n          }\n\n          _context3.next = 11;\n          return put(updateCartSuccess(localCart));\n\n        case 11:\n          modalWarning('warning');\n          _context3.next = 18;\n          break;\n\n        case 14:\n          _context3.prev = 14;\n          _context3.t0 = _context3[\"catch\"](0);\n          _context3.next = 18;\n          return put(getCartError(_context3.t0));\n\n        case 18:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3, null, [[0, 14]]);\n}\n\nfunction increaseQtySaga(payload) {\n  var product, item, localCart, selectedItem;\n  return _regeneratorRuntime.wrap(function increaseQtySaga$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          product = payload.product;\n          item = {\n            id: product.id,\n            name: product.name,\n            slug: product.slug,\n            sku: product.sku[0].sku,\n            regular_price: product.sku[0].regular_price,\n            sell_price: product.sku[0].sell_price,\n            price: product.sku[0].sell_price > 0 ? product.sku[0].sell_price : product.sku[0].regular_price,\n            product_stock: product.sku[0].stock,\n            thumbnail: product.product_media.feature_img\n          };\n          localCart = JSON.parse(JSON.parse(localStorage.getItem('persist:martfury')).cart);\n          selectedItem = localCart.cartItems.find(function (p) {\n            return p.id === item.id;\n          });\n\n          if (selectedItem) {\n            selectedItem.quantity++;\n            localCart.cartTotal++;\n            localCart.amount = calculateAmount(localCart.cartItems);\n          }\n\n          _context4.next = 8;\n          return put(updateCartSuccess(localCart));\n\n        case 8:\n          _context4.next = 14;\n          break;\n\n        case 10:\n          _context4.prev = 10;\n          _context4.t0 = _context4[\"catch\"](0);\n          _context4.next = 14;\n          return put(getCartError(_context4.t0));\n\n        case 14:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4, null, [[0, 10]]);\n}\n\nfunction decreaseItemQtySaga(payload) {\n  var product, item, localCart, selectedItem;\n  return _regeneratorRuntime.wrap(function decreaseItemQtySaga$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.prev = 0;\n          product = payload.product;\n          item = {\n            id: product.id,\n            name: product.name,\n            slug: product.slug,\n            sku: product.sku[0].sku,\n            regular_price: product.sku[0].regular_price,\n            sell_price: product.sku[0].sell_price,\n            price: product.sku[0].sell_price > 0 ? product.sku[0].sell_price : product.sku[0].regular_price,\n            product_stock: product.sku[0].stock,\n            thumbnail: product.product_media.feature_img\n          };\n          localCart = JSON.parse(JSON.parse(localStorage.getItem('persist:martfury')).cart);\n          selectedItem = localCart.cartItems.find(function (item) {\n            return item.id === product.id;\n          });\n\n          if (selectedItem) {\n            selectedItem.quantity--;\n            localCart.cartTotal--;\n            localCart.amount = calculateAmount(localCart.cartItems);\n          }\n\n          _context5.next = 8;\n          return put(updateCartSuccess(localCart));\n\n        case 8:\n          _context5.next = 14;\n          break;\n\n        case 10:\n          _context5.prev = 10;\n          _context5.t0 = _context5[\"catch\"](0);\n          _context5.next = 14;\n          return put(getCartError(_context5.t0));\n\n        case 14:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5, null, [[0, 10]]);\n}\n\nfunction clearCartSaga() {\n  var emptyCart;\n  return _regeneratorRuntime.wrap(function clearCartSaga$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.prev = 0;\n          emptyCart = {\n            cartItems: [],\n            amount: 0,\n            cartTotal: 0\n          };\n          _context6.next = 4;\n          return put(updateCartSuccess(emptyCart));\n\n        case 4:\n          _context6.next = 10;\n          break;\n\n        case 6:\n          _context6.prev = 6;\n          _context6.t0 = _context6[\"catch\"](0);\n          _context6.next = 10;\n          return put(updateCartError(_context6.t0));\n\n        case 10:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked6, null, [[0, 6]]);\n}\n\nexport default function rootSaga() {\n  return _regeneratorRuntime.wrap(function rootSaga$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.next = 2;\n          return all([takeEvery(actionTypes.GET_CART, getCartSaga)]);\n\n        case 2:\n          _context7.next = 4;\n          return all([takeEvery(actionTypes.ADD_ITEM, addItemSaga)]);\n\n        case 4:\n          _context7.next = 6;\n          return all([takeEvery(actionTypes.REMOVE_ITEM, removeItemSaga)]);\n\n        case 6:\n          _context7.next = 8;\n          return all([takeEvery(actionTypes.INCREASE_QTY, increaseQtySaga)]);\n\n        case 8:\n          _context7.next = 10;\n          return all([takeEvery(actionTypes.DECREASE_QTY, decreaseItemQtySaga)]);\n\n        case 10:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, _marked7);\n}","map":{"version":3,"sources":["D:/laragon/www/brand-freak-frontend/store/cart/saga.js"],"names":["getCartSaga","addItemSaga","removeItemSaga","increaseQtySaga","decreaseItemQtySaga","clearCartSaga","rootSaga","all","put","takeEvery","notification","actionTypes","getCartError","getCartSuccess","updateCartSuccess","updateCartError","modalSuccess","type","message","description","duration","modalWarning","calculateAmount","obj","Object","values","reduce","acc","product","quantity","price","toFixed","payload","item","id","name","slug","sku","regular_price","sell_price","product_stock","stock","thumbnail","product_media","feature_img","localCart","JSON","parse","localStorage","getItem","cart","currentCart","existItem","cartItems","find","p","push","amount","cartTotal","index","findIndex","splice","length","selectedItem","emptyCart","GET_CART","ADD_ITEM","REMOVE_ITEM","INCREASE_QTY","DECREASE_QTY"],"mappings":";;oDA+BUA,W;qDAQAC,W;qDAqCAC,c;qDAqCAC,e;qDAiCAC,mB;qDAiCAC,a;qDAaeC,Q;;AAhMzB,SAASC,GAAT,EAAcC,GAAd,EAAmBC,SAAnB,QAAoC,oBAApC;AACA,SAASC,YAAT,QAA6B,MAA7B;AAEA,SACIC,WADJ,EAEIC,YAFJ,EAGIC,cAHJ,EAIIC,iBAJJ,EAKIC,eALJ,QAMO,UANP;;AAQA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,IAAD,EAAU;AAC3BP,EAAAA,YAAY,CAACO,IAAD,CAAZ,CAAmB;AACfC,IAAAA,OAAO,EAAE,SADM;AAEfC,IAAAA,WAAW,EAAE,2CAFE;AAGfC,IAAAA,QAAQ,EAAE;AAHK,GAAnB;AAKH,CAND;;AAOA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACJ,IAAD,EAAU;AAC3BP,EAAAA,YAAY,CAACO,IAAD,CAAZ,CAAmB;AACfC,IAAAA,OAAO,EAAE,eADM;AAEfC,IAAAA,WAAW,EAAE,+CAFE;AAGfC,IAAAA,QAAQ,EAAE;AAHK,GAAnB;AAKH,CAND;;AAQA,OAAO,IAAME,eAAe,GAAG,SAAlBA,eAAkB,CAACC,GAAD;AAAA,SAC3BC,MAAM,CAACC,MAAP,CAAcF,GAAd,EACKG,MADL,CACY,UAACC,GAAD,EAAMC,OAAN;AAAA,WAAkBD,GAAG,GAAGC,OAAO,CAACC,QAAR,GAAmBD,OAAO,CAACE,KAAnD;AAAA,GADZ,EACsE,CADtE,EAEKC,OAFL,CAEa,CAFb,CAD2B;AAAA,CAAxB;;AAKP,SAAU/B,WAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEQ,iBAAMQ,GAAG,CAACK,cAAc,EAAf,CAAT;;AAFR;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAIQ,iBAAML,GAAG,CAACI,YAAY,aAAb,CAAT;;AAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAQA,SAAUX,WAAV,CAAsB+B,OAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEgBJ,UAAAA,OAFhB,GAE4BI,OAF5B,CAEgBJ,OAFhB;AAGcK,UAAAA,IAHd,GAGqB;AACTC,YAAAA,EAAE,EAAEN,OAAO,CAACM,EADH;AAETC,YAAAA,IAAI,EAAEP,OAAO,CAACO,IAFL;AAGTC,YAAAA,IAAI,EAAER,OAAO,CAACQ,IAHL;AAITC,YAAAA,GAAG,EAAET,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeA,GAJX;AAKTC,YAAAA,aAAa,EAAEV,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeC,aALrB;AAMTC,YAAAA,UAAU,EAAEX,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeE,UANlB;AAOTT,YAAAA,KAAK,EAAEF,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeE,UAAf,GAA4B,CAA5B,GAAgCX,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeE,UAA/C,GAA4DX,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeC,aAPzE;AAQTE,YAAAA,aAAa,EAAEZ,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeI,KARrB;AASTC,YAAAA,SAAS,EAAEd,OAAO,CAACe,aAAR,CAAsBC;AATxB,WAHrB;AAccC,UAAAA,SAdd,GAc0BC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,kBAArB,CAAX,EACbC,IAfb;AAgBYC,UAAAA,WAhBZ,GAgB0BL,IAAI,CAACC,KAAL,CAAWF,SAAX,CAhB1B;AAiBYO,UAAAA,SAjBZ,GAiBwBD,WAAW,CAACE,SAAZ,CAAsBC,IAAtB,CACZ,UAACC,CAAD;AAAA,mBAAOA,CAAC,CAACrB,EAAF,KAASD,IAAI,CAACC,EAArB;AAAA,WADY,CAjBxB;;AAoBQ,cAAIkB,SAAJ,EAAe;AACXA,YAAAA,SAAS,CAACvB,QAAV,IAAsBI,IAAI,CAACJ,QAA3B;AACH,WAFD,MAEO;AACH,gBAAI,CAACI,IAAI,CAACJ,QAAV,EAAoB;AAChBI,cAAAA,IAAI,CAACJ,QAAL,GAAgB,CAAhB;AACH;;AACDsB,YAAAA,WAAW,CAACE,SAAZ,CAAsBG,IAAtB,CAA2BvB,IAA3B;AACH;;AACDkB,UAAAA,WAAW,CAACM,MAAZ,GAAqBnC,eAAe,CAAC6B,WAAW,CAACE,SAAb,CAApC;AACAF,UAAAA,WAAW,CAACO,SAAZ;AA7BR;AA8BQ,iBAAMlD,GAAG,CAACM,iBAAiB,CAACqC,WAAD,CAAlB,CAAT;;AA9BR;AA+BQnC,UAAAA,YAAY,CAAC,SAAD,CAAZ;AA/BR;AAAA;;AAAA;AAAA;AAAA;AAAA;AAiCQ,iBAAMR,GAAG,CAACI,YAAY,cAAb,CAAT;;AAjCR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAqCA,SAAUV,cAAV,CAAyB8B,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEgBJ,UAAAA,OAFhB,GAE4BI,OAF5B,CAEgBJ,OAFhB;AAIcK,UAAAA,IAJd,GAIqB;AACTC,YAAAA,EAAE,EAAEN,OAAO,CAACM,EADH;AAETC,YAAAA,IAAI,EAAEP,OAAO,CAACO,IAFL;AAGTC,YAAAA,IAAI,EAAER,OAAO,CAACQ,IAHL;AAITC,YAAAA,GAAG,EAAET,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeA,GAJX;AAKTC,YAAAA,aAAa,EAAEV,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeC,aALrB;AAMTC,YAAAA,UAAU,EAAEX,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeE,UANlB;AAOTT,YAAAA,KAAK,EAAEF,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeE,UAAf,GAA4B,CAA5B,GAAgCX,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeE,UAA/C,GAA4DX,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeC,aAPzE;AAQTE,YAAAA,aAAa,EAAEZ,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeI,KARrB;AASTC,YAAAA,SAAS,EAAEd,OAAO,CAACe,aAAR,CAAsBC;AATxB,WAJrB;AAgBYC,UAAAA,SAhBZ,GAgBwBC,IAAI,CAACC,KAAL,CACZD,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,kBAArB,CAAX,EAAqDC,IADzC,CAhBxB;AAmBYS,UAAAA,KAnBZ,GAmBoBd,SAAS,CAACQ,SAAV,CAAoBO,SAApB,CACR,UAACL,CAAD;AAAA,mBAAOA,CAAC,CAACrB,EAAF,KAASD,IAAI,CAACC,EAArB;AAAA,WADQ,CAnBpB;AAsBQW,UAAAA,SAAS,CAACa,SAAV,GAAsBb,SAAS,CAACa,SAAV,GAAsB9B,OAAO,CAACC,QAApD;AACAgB,UAAAA,SAAS,CAACQ,SAAV,CAAoBQ,MAApB,CAA2BF,KAA3B,EAAkC,CAAlC;AACAd,UAAAA,SAAS,CAACY,MAAV,GAAmBnC,eAAe,CAACuB,SAAS,CAACQ,SAAX,CAAlC;;AACA,cAAIR,SAAS,CAACQ,SAAV,CAAoBS,MAApB,KAA+B,CAAnC,EAAsC;AAClCjB,YAAAA,SAAS,CAACQ,SAAV,GAAsB,EAAtB;AACAR,YAAAA,SAAS,CAACY,MAAV,GAAmB,CAAnB;AACAZ,YAAAA,SAAS,CAACa,SAAV,GAAsB,CAAtB;AACH;;AA7BT;AA8BQ,iBAAMlD,GAAG,CAACM,iBAAiB,CAAC+B,SAAD,CAAlB,CAAT;;AA9BR;AA+BQxB,UAAAA,YAAY,CAAC,SAAD,CAAZ;AA/BR;AAAA;;AAAA;AAAA;AAAA;AAAA;AAiCQ,iBAAMb,GAAG,CAACI,YAAY,cAAb,CAAT;;AAjCR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAqCA,SAAUT,eAAV,CAA0B6B,OAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEgBJ,UAAAA,OAFhB,GAE4BI,OAF5B,CAEgBJ,OAFhB;AAIcK,UAAAA,IAJd,GAIqB;AACTC,YAAAA,EAAE,EAAEN,OAAO,CAACM,EADH;AAETC,YAAAA,IAAI,EAAEP,OAAO,CAACO,IAFL;AAGTC,YAAAA,IAAI,EAAER,OAAO,CAACQ,IAHL;AAITC,YAAAA,GAAG,EAAET,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeA,GAJX;AAKTC,YAAAA,aAAa,EAAEV,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeC,aALrB;AAMTC,YAAAA,UAAU,EAAEX,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeE,UANlB;AAOTT,YAAAA,KAAK,EAAEF,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeE,UAAf,GAA4B,CAA5B,GAAgCX,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeE,UAA/C,GAA4DX,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeC,aAPzE;AAQTE,YAAAA,aAAa,EAAEZ,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeI,KARrB;AASTC,YAAAA,SAAS,EAAEd,OAAO,CAACe,aAAR,CAAsBC;AATxB,WAJrB;AAgBYC,UAAAA,SAhBZ,GAgBwBC,IAAI,CAACC,KAAL,CACZD,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,kBAArB,CAAX,EAAqDC,IADzC,CAhBxB;AAmBYa,UAAAA,YAnBZ,GAmB2BlB,SAAS,CAACQ,SAAV,CAAoBC,IAApB,CACf,UAACC,CAAD;AAAA,mBAAOA,CAAC,CAACrB,EAAF,KAASD,IAAI,CAACC,EAArB;AAAA,WADe,CAnB3B;;AAsBQ,cAAI6B,YAAJ,EAAkB;AACdA,YAAAA,YAAY,CAAClC,QAAb;AACAgB,YAAAA,SAAS,CAACa,SAAV;AACAb,YAAAA,SAAS,CAACY,MAAV,GAAmBnC,eAAe,CAACuB,SAAS,CAACQ,SAAX,CAAlC;AACH;;AA1BT;AA2BQ,iBAAM7C,GAAG,CAACM,iBAAiB,CAAC+B,SAAD,CAAlB,CAAT;;AA3BR;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AA6BQ,iBAAMrC,GAAG,CAACI,YAAY,cAAb,CAAT;;AA7BR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAiCA,SAAUR,mBAAV,CAA8B4B,OAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEgBJ,UAAAA,OAFhB,GAE4BI,OAF5B,CAEgBJ,OAFhB;AAGcK,UAAAA,IAHd,GAGqB;AACTC,YAAAA,EAAE,EAAEN,OAAO,CAACM,EADH;AAETC,YAAAA,IAAI,EAAEP,OAAO,CAACO,IAFL;AAGTC,YAAAA,IAAI,EAAER,OAAO,CAACQ,IAHL;AAITC,YAAAA,GAAG,EAAET,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeA,GAJX;AAKTC,YAAAA,aAAa,EAAEV,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeC,aALrB;AAMTC,YAAAA,UAAU,EAAEX,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeE,UANlB;AAOTT,YAAAA,KAAK,EAAEF,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeE,UAAf,GAA4B,CAA5B,GAAgCX,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeE,UAA/C,GAA4DX,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeC,aAPzE;AAQTE,YAAAA,aAAa,EAAEZ,OAAO,CAACS,GAAR,CAAY,CAAZ,EAAeI,KARrB;AASTC,YAAAA,SAAS,EAAEd,OAAO,CAACe,aAAR,CAAsBC;AATxB,WAHrB;AAecC,UAAAA,SAfd,GAe0BC,IAAI,CAACC,KAAL,CACdD,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,kBAArB,CAAX,EAAqDC,IADvC,CAf1B;AAkBYa,UAAAA,YAlBZ,GAkB2BlB,SAAS,CAACQ,SAAV,CAAoBC,IAApB,CACf,UAACrB,IAAD;AAAA,mBAAUA,IAAI,CAACC,EAAL,KAAYN,OAAO,CAACM,EAA9B;AAAA,WADe,CAlB3B;;AAsBQ,cAAI6B,YAAJ,EAAkB;AACdA,YAAAA,YAAY,CAAClC,QAAb;AACAgB,YAAAA,SAAS,CAACa,SAAV;AACAb,YAAAA,SAAS,CAACY,MAAV,GAAmBnC,eAAe,CAACuB,SAAS,CAACQ,SAAX,CAAlC;AACH;;AA1BT;AA2BQ,iBAAM7C,GAAG,CAACM,iBAAiB,CAAC+B,SAAD,CAAlB,CAAT;;AA3BR;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AA6BQ,iBAAMrC,GAAG,CAACI,YAAY,cAAb,CAAT;;AA7BR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAiCA,SAAUP,aAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEc2D,UAAAA,SAFd,GAE0B;AACdX,YAAAA,SAAS,EAAE,EADG;AAEdI,YAAAA,MAAM,EAAE,CAFM;AAGdC,YAAAA,SAAS,EAAE;AAHG,WAF1B;AAAA;AAOQ,iBAAMlD,GAAG,CAACM,iBAAiB,CAACkD,SAAD,CAAlB,CAAT;;AAPR;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AASQ,iBAAMxD,GAAG,CAACO,eAAe,cAAhB,CAAT;;AATR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAaA,eAAe,SAAUT,QAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AACX,iBAAMC,GAAG,CAAC,CAACE,SAAS,CAACE,WAAW,CAACsD,QAAb,EAAuBjE,WAAvB,CAAV,CAAD,CAAT;;AADW;AAAA;AAEX,iBAAMO,GAAG,CAAC,CAACE,SAAS,CAACE,WAAW,CAACuD,QAAb,EAAuBjE,WAAvB,CAAV,CAAD,CAAT;;AAFW;AAAA;AAGX,iBAAMM,GAAG,CAAC,CAACE,SAAS,CAACE,WAAW,CAACwD,WAAb,EAA0BjE,cAA1B,CAAV,CAAD,CAAT;;AAHW;AAAA;AAIX,iBAAMK,GAAG,CAAC,CAACE,SAAS,CAACE,WAAW,CAACyD,YAAb,EAA2BjE,eAA3B,CAAV,CAAD,CAAT;;AAJW;AAAA;AAKX,iBAAMI,GAAG,CAAC,CAACE,SAAS,CAACE,WAAW,CAAC0D,YAAb,EAA2BjE,mBAA3B,CAAV,CAAD,CAAT;;AALW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import { all, put, takeEvery } from 'redux-saga/effects';\nimport { notification } from 'antd';\n\nimport {\n    actionTypes,\n    getCartError,\n    getCartSuccess,\n    updateCartSuccess,\n    updateCartError,\n} from './action';\n\nconst modalSuccess = (type) => {\n    notification[type]({\n        message: 'Success',\n        description: 'This product has been added to your cart!',\n        duration: 1,\n    });\n};\nconst modalWarning = (type) => {\n    notification[type]({\n        message: 'Remove A Item',\n        description: 'This product has been removed from your cart!',\n        duration: 1,\n    });\n};\n\nexport const calculateAmount = (obj) =>\n    Object.values(obj)\n        .reduce((acc, product) => acc + product.quantity * product.price, 0)\n        .toFixed(2);\n\nfunction* getCartSaga() {\n    try {\n        yield put(getCartSuccess());\n    } catch (err) {\n        yield put(getCartError(err));\n    }\n}\n\nfunction* addItemSaga(payload) {\n    try {\n        const { product } = payload;\n        const item = {\n            id: product.id,\n            name: product.name,\n            slug: product.slug,\n            sku: product.sku[0].sku,\n            regular_price: product.sku[0].regular_price,\n            sell_price: product.sku[0].sell_price,\n            price: product.sku[0].sell_price > 0 ? product.sku[0].sell_price : product.sku[0].regular_price,\n            product_stock: product.sku[0].stock,\n            thumbnail: product.product_media.feature_img\n        }\n        const localCart = JSON.parse(localStorage.getItem('persist:martfury'))\n            .cart;\n        let currentCart = JSON.parse(localCart);\n        let existItem = currentCart.cartItems.find(\n            (p) => p.id === item.id\n        );\n        if (existItem) {\n            existItem.quantity += item.quantity;\n        } else {\n            if (!item.quantity) {\n                item.quantity = 1;\n            }\n            currentCart.cartItems.push(item);\n        }\n        currentCart.amount = calculateAmount(currentCart.cartItems);\n        currentCart.cartTotal++;\n        yield put(updateCartSuccess(currentCart));\n        modalSuccess('success');\n    } catch (err) {\n        yield put(getCartError(err));\n    }\n}\n\nfunction* removeItemSaga(payload) {\n    try {\n        const { product } = payload;\n\n        const item = {\n            id: product.id,\n            name: product.name,\n            slug: product.slug,\n            sku: product.sku[0].sku,\n            regular_price: product.sku[0].regular_price,\n            sell_price: product.sku[0].sell_price,\n            price: product.sku[0].sell_price > 0 ? product.sku[0].sell_price : product.sku[0].regular_price,\n            product_stock: product.sku[0].stock,\n            thumbnail: product.product_media.feature_img\n        }\n\n        let localCart = JSON.parse(\n            JSON.parse(localStorage.getItem('persist:martfury')).cart\n        );\n        let index = localCart.cartItems.findIndex(\n            (p) => p.id === item.id\n        );\n        localCart.cartTotal = localCart.cartTotal - product.quantity;\n        localCart.cartItems.splice(index, 1);\n        localCart.amount = calculateAmount(localCart.cartItems);\n        if (localCart.cartItems.length === 0) {\n            localCart.cartItems = [];\n            localCart.amount = 0;\n            localCart.cartTotal = 0;\n        }\n        yield put(updateCartSuccess(localCart));\n        modalWarning('warning');\n    } catch (err) {\n        yield put(getCartError(err));\n    }\n}\n\nfunction* increaseQtySaga(payload) {\n    try {\n        const { product } = payload;\n\n        const item = {\n            id: product.id,\n            name: product.name,\n            slug: product.slug,\n            sku: product.sku[0].sku,\n            regular_price: product.sku[0].regular_price,\n            sell_price: product.sku[0].sell_price,\n            price: product.sku[0].sell_price > 0 ? product.sku[0].sell_price : product.sku[0].regular_price,\n            product_stock: product.sku[0].stock,\n            thumbnail: product.product_media.feature_img\n        }\n\n        let localCart = JSON.parse(\n            JSON.parse(localStorage.getItem('persist:martfury')).cart\n        );\n        let selectedItem = localCart.cartItems.find(\n            (p) => p.id === item.id\n        );\n        if (selectedItem) {\n            selectedItem.quantity++;\n            localCart.cartTotal++;\n            localCart.amount = calculateAmount(localCart.cartItems);\n        }\n        yield put(updateCartSuccess(localCart));\n    } catch (err) {\n        yield put(getCartError(err));\n    }\n}\n\nfunction* decreaseItemQtySaga(payload) {\n    try {\n        const { product } = payload;\n        const item = {\n            id: product.id,\n            name: product.name,\n            slug: product.slug,\n            sku: product.sku[0].sku,\n            regular_price: product.sku[0].regular_price,\n            sell_price: product.sku[0].sell_price,\n            price: product.sku[0].sell_price > 0 ? product.sku[0].sell_price : product.sku[0].regular_price,\n            product_stock: product.sku[0].stock,\n            thumbnail: product.product_media.feature_img\n        }\n        \n        const localCart = JSON.parse(\n            JSON.parse(localStorage.getItem('persist:martfury')).cart\n        );\n        let selectedItem = localCart.cartItems.find(\n            (item) => item.id === product.id\n        );\n\n        if (selectedItem) {\n            selectedItem.quantity--;\n            localCart.cartTotal--;\n            localCart.amount = calculateAmount(localCart.cartItems);\n        }\n        yield put(updateCartSuccess(localCart));\n    } catch (err) {\n        yield put(getCartError(err));\n    }\n}\n\nfunction* clearCartSaga() {\n    try {\n        const emptyCart = {\n            cartItems: [],\n            amount: 0,\n            cartTotal: 0,\n        };\n        yield put(updateCartSuccess(emptyCart));\n    } catch (err) {\n        yield put(updateCartError(err));\n    }\n}\n\nexport default function* rootSaga() {\n    yield all([takeEvery(actionTypes.GET_CART, getCartSaga)]);\n    yield all([takeEvery(actionTypes.ADD_ITEM, addItemSaga)]);\n    yield all([takeEvery(actionTypes.REMOVE_ITEM, removeItemSaga)]);\n    yield all([takeEvery(actionTypes.INCREASE_QTY, increaseQtySaga)]);\n    yield all([takeEvery(actionTypes.DECREASE_QTY, decreaseItemQtySaga)]);\n}\n"]},"metadata":{},"sourceType":"module"}